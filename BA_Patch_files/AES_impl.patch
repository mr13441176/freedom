--- bootrom/freedom-u540-c000-bootloader/lib/memcpy.c	2019-12-18 17:19:26.377182560 +0900
+++ ../freedom_tmp/bootrom/freedom-u540-c000-bootloader/lib/memcpy.c	2019-12-05 13:55:42.150666285 +0900
@@ -84,3 +84,29 @@
     goto small;
   return aa;
 }
+int memcmp(const void* s1, const void* s2, size_t n)
+{
+  if ((((uintptr_t)s1 | (uintptr_t)s2) & (sizeof(uintptr_t)-1)) == 0) {
+    const uintptr_t* u1 = s1;
+    const uintptr_t* u2 = s2;
+    const uintptr_t* end = u1 + (n / sizeof(uintptr_t));
+    while (u1 < end) {
+      if (*u1 != *u2)
+        break;
+      u1++;
+      u2++;
+    }
+    n -= (const void*)u1 - s1;
+    s1 = u1;
+    s2 = u2;
+  }
+
+  while (n--) {
+    unsigned char c1 = *(const unsigned char*)s1++;
+    unsigned char c2 = *(const unsigned char*)s2++;
+    if (c1 != c2)
+      return c1 - c2;
+  }
+
+  return 0;
+}
